<script>
		// ========================================
		// FUNÇÕES DE VISUALIZAÇÃO E EDIÇÃO
		// ========================================
		// Função para visualizar detalhes do usuário
		function visualizarUsuario(u) {
			console.log('Dados recebidos:', u);

			document.getElementById("viewId").textContent = u.id ?? "-";
			document.getElementById("viewStatus").textContent = u.ativo ? "Ativo" : "Inativo";
			document.getElementById("viewNome").textContent = u.nome ?? "-";

			// Perfil
			let badgeClass = "bg-primary";
			let perfilTexto = "";
			switch (u.perfilUser) {
				case 1:
					perfilTexto = "Aluno";
					badgeClass = "bg-success bg-opacity-25 text-success fw-bold p-2";
					break;
				case 2:
					perfilTexto = "Treinador";
					badgeClass = "bg-primary bg-opacity-25 text-primary fw-bold p-2";
					break;
				case 3:
					perfilTexto = "Administrador";
					badgeClass = "bg-danger bg-opacity-25 text-danger fw-bold p-2";
					break;
				default:
					perfilTexto = "Padrão";
					break;
			}
			document.getElementById("viewTipoUsuario").innerHTML =`<span class="badge  ${badgeClass}">${perfilTexto}</span>`;

			document.getElementById("viewEmail").textContent = u.email ?? "-";
			document.getElementById("viewCpf").textContent = u.cpf ?? "-";
			document.getElementById("viewTelefone").textContent = u.telefone ?? "-";

			document.getElementById("viewDataNascimento").textContent = u.dataNascimento
					? new Date(u.dataNascimento).toLocaleDateString("pt-BR")
					: "-";

			document.getElementById("viewEndereco").textContent = u.endereco ?? "-";

			document.getElementById("viewDataCadastro").textContent = u.dataCadastro
					? new Date(u.dataCadastro).toLocaleDateString("pt-BR") + " às " +
					  new Date(u.dataCadastro).toLocaleTimeString("pt-BR", { hour: '2-digit', minute: '2-digit' })
					: "-";


		}



		// Função para preparar edição do usuário
		function editarUsuario(u) {
				document.getElementById("editId").value = u.id ?? u.Id;
				document.getElementById("editNome").value = u.nome ?? u.Nome;
				document.getElementById("editCpf").value = u.cpf ?? u.Cpf;
				document.getElementById("editEmail").value = u.email ?? u.Email;
				document.getElementById("editTelefone").value = u.telefone ?? u.Telefone;

				// Perfil vem como número → perfeito
				document.getElementById("editTipoUsuario").value = u.perfilUser ?? "";
			document.getElementById("editAtivo").checked = u.ativo ?? false;
		}


		// Função para preparar exclusão do usuário
		function prepararDeletar(u) {

			document.getElementById("deleteId").value = u.id ?? u.Id;
			document.getElementById("deleteNome").textContent = u.nome ?? u.Nome;
		}


		// ========================================
		// FUNÇÕES DE PAGINAÇÃO E FILTROS
		// ========================================

		// Navegar para página específica
		function irParaPagina(pagina) {
			document.querySelector('input[name="PaginaAtual"]').value = pagina;
			document.getElementById('formFiltros').submit();
		}

		// Ordenar tabela por coluna
		function ordenar(campo) {
			const ordenarPorInput = document.querySelector('input[name="OrdenarPor"]');
			const direcaoOrdemInput = document.querySelector('input[name="ordernarDirecao"]');

			if (ordenarPorInput.value === campo) {
				// Inverte a direção se for a mesma coluna
				direcaoOrdemInput.value = direcaoOrdemInput.value === 'asc' ? 'desc' : 'asc';
			} else {
				// Novo campo, começa com ascendente
				ordenarPorInput.value = campo;
				direcaoOrdemInput.value = 'asc';
			}

			// Volta para primeira página ao ordenar
			document.querySelector('input[name="PaginaAtual"]').value = 1;
			document.getElementById('formFiltros').submit();
		}

		// Limpar todos os filtros
		function limparFiltros() {
			window.location.href = '@Url.Action("Index", "Usuario")';
		}

		// ========================================
		// CONTROLES DE CAMPOS CONDICIONAIS
		// ========================================

		document.addEventListener('DOMContentLoaded', function() {
			const perfilSelect = document.getElementById('PerfilUserSelect');
			const camposAluno = document.getElementById('camposAluno');
			const camposTreinador = document.getElementById('camposTreinador');
			const dataMatricula = document.querySelector('input[name="DataMatricula"]');

			if (perfilSelect) {
				perfilSelect.addEventListener('change', function() {
					const perfil = this.value;

					// Esconde todos os campos condicionais
					if (camposAluno) camposAluno.classList.add('d-none');
					if (camposTreinador) camposTreinador.classList.add('d-none');

					// Mostra campos específicos baseado na seleção
					if (perfil === '1') { // Aluno
						if (camposAluno) {
							camposAluno.classList.remove('d-none');

							// Preenche data de matrícula automaticamente
							if (dataMatricula) {
								const dataAtual = new Date().toISOString().split('T')[0];
								dataMatricula.value = dataAtual;
							}
						}
					} else if (perfil === '2') { // Treinador
						if (camposTreinador) {
							camposTreinador.classList.remove('d-none');
						}
					}
					// Administrador (0) não tem campos específicos
				});
			}
		});
</script>
}